# 1、集群节点问题修复
~~~sh
curl http://xxxx: 9200/_cat/nodes?v  -u elastic



curl -XGET "http://10.251.84.162:19200/_cluster/health?pretty" -u elastic
~~~

![image-20251121160411324](0002_线上集群问题排查处理.assets/image-20251121160411324.png)

![image-20251121160441272](0002_线上集群问题排查处理.assets/image-20251121160441272.png)

master错误信息

![image-20251121160657394](0002_线上集群问题排查处理.assets/image-20251121160657394.png)

data 节点报错

![image-20251121160809765](0002_线上集群问题排查处理.assets/image-20251121160809765.png)

上面都体现出证书的问题。



解决方法； 修改 network.host  为 生成证书时配置的ip 的网卡。否则IP绑定错误也会导致证书认证失败。

![image-20251121172659334](0002_线上集群问题排查处理.assets/image-20251121172659334.png)

完成修改后依次重启即可。ip 为指导的ip即可。

![image-20251121173122905](0002_线上集群问题排查处理.assets/image-20251121173122905.png)

# 2、集群状态修复

![image-20251121173155858](0002_线上集群问题排查处理.assets/image-20251121173155858.png)

~~~sh
curl -XGET "http://10.251.84.162:19200/_cat/shards?v&h=index,shard,prirep,state,unassigned.reason" -u elastic | grep UNASSIGNED
~~~

当前集群正在自动恢复完成恢复后，将master节点不在写入数据

