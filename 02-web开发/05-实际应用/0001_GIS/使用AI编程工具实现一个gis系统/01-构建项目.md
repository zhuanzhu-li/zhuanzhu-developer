# 项目构建

## 1. cursor rules配置

ai-detector.mdc

~~~
---
alwaysApply: true
---
# AI 代码标记规则（强制性）
 
## 重要提醒
⚠️ **此规则为强制性规则，每次生成或修改代码时必须执行，不得遗漏！**
在每次生成代码时：
**必须**在每次生成的新增代码行之前，先添加一行注释：`Generated By AI Start (Cursor)`
**必须**在每次生成的新增代码行之后，再追加一行注释：`Generated By AI End (Cursor)`
**必须**若本次生成的新增代码行已经添加过AI标记（包含在添加AI标记的代码块中），则无需添加新的AI标记
 
在完成用户的需求后，检查新增的代码中是否正常添加了AI标记

~~~

spring-boot-conventions.mdc

~~~
---
name: spring-boot-conventions
rule_type: always
description: Spring Boot项目后端开发规范
---

**技术栈与规范**
- 本项目基于 Spring Boot 3.x 和 Java 17 开发，请使用相关特性。
- API 设计严格遵循 RESTful 风格，响应体统一使用 Result 包装。
- 使用 Maven 进行依赖管理。

**代码风格**
- 类名使用 PascalCase，方法名和变量名使用 camelCase。
- 优先使用构造器注入而非 `@Autowired` 字段注入。
- 业务异常必须使用自定义异常，并在全局异常处理器中处理。
- 统一使用 4 个空格进行缩进。左大括号不换行。

**数据与测试**
- 数据库访问使用 Spring Data JPA。
- 编写功能完备的单元测试（JUnit 5）和集成测试（@SpringBootTest）。
~~~

## 2. 项目构建提示词

需求说明：

我想搭建一个基于spring cloud alibaba、DDD领域建模的分布式微服务项目，注册中心以及配置中心使用nacos、统一网关为springcloud gateway、分布式缓存使用redis、消息队列使用kafka、日志存储使用logstash+es、数据库使用postgresql。

你先输出你的实现方案以及会输出的文档

后续步骤推荐：

1. **安全认证 - 实现JWT Token验证、OAuth2授权**

   ​	**认证服务中的用户表是否与用户服务中的用户表有功能重叠呢？这样设计的优缺点？**

   1. 重构认证服务的用户表（简化为最小认证信息）
   2. 完善用户服务的用户信息表（包含完整业务字段）
   3. 实现 Kafka 事件发布订阅机制
   4. 创建数据同步和补偿机制
   5. 更新相关的代码逻辑

2. 限流熔断 - Sentinel流量控制

3. 分布式事务 - Seata AT模式

4. GIS服务 - 空间数据处理、地图服务

5. API文档 - SpringDoc OpenAPI自动生成

6. 监控告警 - Prometheus + Grafana

7. 链路追踪 - Micrometer Tracing

8. 单元测试 - JUnit 5 + Mockito

